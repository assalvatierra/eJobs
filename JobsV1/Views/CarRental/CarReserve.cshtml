
<style>
    .rental-type {
       visibility:hidden;
    }
</style>

<div class="modal-content" style="min-width:600px;">
    <div class="modal-header">
        <h3 class="modal-title">Car Reservation </h3>

        <a href="#" onclick="CarReserve_NextForm()"> Proceed       </a>

        <h5 id="modal-text-foot">-</h5>
    </div>



    <div class="modal-body row" id="modal2-content">

        <div id="btn-rentalType" class="btn-group btn-group-justified">
            <label class="btn btn-primary active" id="rental-type-wdriver" data-toggle="tooltip" >
                <input type="radio" name="options" id="withdriver" value="With Driver" class="rental-type" />
                <span>
                    With Driver
                </span>
            </label>
            <label class="btn btn-primary" id="rental-type-sdrive">
                <input type="radio" name="options" id="selfdrive" value="Self Drive" class="rental-type"  />
                <span>
                    Self Drive
                </span>
            </label>

            <label class="btn btn-primary" id="rental-type-longterm">
                <input type="radio" name="options" id="longterm" value="longterm" class="rental-type"  />
                <span>
                    Long Term Rental
                </span>
            </label>
        </div>
        <br />

        <!-- Number of Days, Fuel and Meals-->
        <div class="form-horizontal">
            <div class="form-group">
                <label class="control-label col-lg-1"> Days </label>
                <div class="col-lg-1">
                    <input type="number" value="1" class="form-control" id="rsv-days" oninput="dayschange()" />
                </div>
                <div class="col-lg-2">
                    <button class="btn btn-default " id="days-add"> + </button>
                    <button class="btn btn-default " id="days-sub"> - </button>
                </div>

                <div class="col-lg-4">
                    @Html.DropDownList("MealsAcc", null, htmlAttributes: new { @class = "form-control", @id = "rsv-meal" })
                </div>

                <div class="col-lg-4">
                    @Html.DropDownList("Fuel", null, htmlAttributes: new { @class = "form-control", @id = "rsv-fuel" })
                </div>

            </div>
        </div>

        <!-- Car selection list -->
        <div class="col-lg-12 carent" id="btn-rentalUnit" style="margin-bottom:155px;">
            @foreach (var carList in ViewBag.CarUnitList as IEnumerable<JobsV1.Models.CarUnit>)
            {
                <label class="btn col-md-4 car-selection isSelfDrive@(carList.SelfDrive)" id="car@(carList.Id)" style="width:180px;height:200px;">
                    <h5><b>@carList.Description</b></h5>
                    <input type="radio" name="cars" value="@carList.Description" id="@(carList.Id)" style="visibility:hidden;" />
                    <img src="~/Images/CarRental/@carList.CarImages.Where(c=>c.CarUnitId == carList.Id).First().ImgUrl" width="100%" style="margin-left:-30px;" />
                </label>
            }
        </div>


    </div>

    <div class="modal-footer" id="rsv-footer" style="display:block;">
        <div class="pull-right">

            @Html.ActionLink("Cancel", "Index", "CarRental", null, new { @class = "btn btn-default" })
            <button class="btn btn-default" onclick="CarReserve_NextForm()" > Next </button>

        </div>
    </div>
</div>


<div class="modal-body row" id="formFinish" style="display:none;">
   <img src="~/Images/LOGO_AJRENTACAR.jpg" width="200" />

   <h2>Thank you for the Reservation. </h2>
   <p>We will contact you through provided email and mobile number.</p>

   <button class="btn btn-primary">Close</button>
</div>

<!--Scripts-->
<script type="text/javascript" src="~/Scripts/jquery-3.3.1.js"></script>
<script type="text/javascript" src="~/Scripts/CarRental/FormCarReserve.js"></script>
  
<script>
    
    //get info from input and direct to formPackage form
    function CarReserve_NextForm() {

        var rentalTypeText = $('input:radio[name=options]:checked').val();
        var rentalType = 1;
        var carId = $('input:radio[name=cars]:checked').attr("id");
        var noDays = $('#rsv-days').val();
        var mealsAcc = $('#rsv-meal').val();
        var fuel = $('#rsv-fuel').val();
        
        
        switch(rentalTypeText){
            case "With Driver":
                rentalType = 1;
                break;
            case "Self Drive":
                rentalType = 2;
                break;
            case "longterm":
                rentalType = 3;
                noDays = 30;
                break;
            default:
                rentalType = 1;
                break;
        }


        console.log("Rental:" + rentalType);
        console.log("selectedCar:" + carId);
        console.log("NoDays:" + noDays);
        console.log("MealsAcc:" + mealsAcc);
        console.log("Fuel:" + fuel);

        if (rentalType == 1 || rentalType == 3) {
            CarReserve_FormPackages("CarRental",carId, noDays, rentalType, mealsAcc, fuel);
        }else{
            selfDrive(carId);
        }

    }
    //next popup on formpackages package list
    $(document).ready(function(){
        CarReserve_Default(@ViewBag.carid,@ViewBag.days,@ViewBag.meals,@ViewBag.fuelId);
    });


</script>